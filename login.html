<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>登录 - AI绘本</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: {
                            50: '#f0f3ff',
                            100: '#e0e7ff',
                            200: '#c7d2fe',
                            300: '#a5b4fc',
                            400: '#818cf8',
                            500: '#6366f1',
                            600: '#4f46e5',
                            700: '#4338ca',
                            800: '#3730a3',
                            900: '#312e81',
                        },
                    }
                }
            }
        }
    </script>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;
        }

        /* 渐变背景动画 */
        @keyframes gradient {
            0% {
                background-position: 0% 50%;
            }
            50% {
                background-position: 100% 50%;
            }
            100% {
                background-position: 0% 50%;
            }
        }

        .animated-gradient {
            background: linear-gradient(-45deg, #667eea 0%, #764ba2 25%, #f093fb 50%, #4facfe 75%, #667eea 100%);
            background-size: 400% 400%;
            animation: gradient 15s ease infinite;
        }

        /* 浮动动画 */
        @keyframes float {
            0%, 100% {
                transform: translateY(0px);
            }
            50% {
                transform: translateY(-20px);
            }
        }

        .float-animation {
            animation: float 6s ease-in-out infinite;
        }

        /* 输入框聚焦效果 */
        .input-field:focus {
            transform: translateY(-2px);
            box-shadow: 0 12px 24px -10px rgba(99, 102, 241, 0.3);
        }

        /* 按钮点击效果 */
        .btn-primary:active {
            transform: scale(0.98);
        }

        /* 抖动动画 */
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-8px); }
            75% { transform: translateX(8px); }
        }

        .shake-animation {
            animation: shake 0.3s ease-in-out;
        }
    </style>
</head>

<body class="min-h-screen animated-gradient flex items-center justify-center p-4">

    <!-- 装饰性背景元素 -->
    <div class="fixed inset-0 overflow-hidden pointer-events-none">
        <div class="absolute top-20 left-10 w-72 h-72 bg-white/10 rounded-full blur-3xl float-animation"></div>
        <div class="absolute bottom-20 right-10 w-96 h-96 bg-white/10 rounded-full blur-3xl float-animation" style="animation-delay: 2s;"></div>
        <div class="absolute top-1/2 left-1/2 w-80 h-80 bg-white/5 rounded-full blur-3xl float-animation" style="animation-delay: 4s;"></div>
    </div>

    <!-- 登录卡片 -->
    <div class="relative w-full max-w-md">
        <!-- Logo和标题区域 -->
        <div class="text-center mb-8">
            <h1 class="text-4xl font-bold text-white mb-2">欢迎登录</h1>
            <p class="text-white/80">AI绘本创作平台</p>
        </div>

        <!-- 登录表单卡片 -->
        <div class="bg-white/95 backdrop-blur-xl rounded-3xl shadow-2xl p-8 border border-white/20">
            <form id="loginForm" onsubmit="handleLogin(event)">
                <!-- 账号输入框 -->
                <div class="mb-6">
                    <label class="block text-sm font-medium text-gray-700 mb-2">
                        <i data-lucide="user" class="w-4 h-4 inline-block mr-1"></i>
                        账号或手机号
                    </label>
                    <input 
                        type="text" 
                        id="username"
                        class="input-field w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-primary-400 focus:ring-4 focus:ring-primary-50 outline-none transition-all text-gray-700 placeholder-gray-400"
                        placeholder="请输入账号或手机号"
                        required
                    >
                    <p id="usernameError" class="text-red-500 text-xs mt-1 invisible">请输入有效的账号或手机号</p>
                </div>

                <!-- 密码输入框 -->
                <div class="mb-6">
                    <label class="block text-sm font-medium text-gray-700 mb-2">
                        <i data-lucide="lock" class="w-4 h-4 inline-block mr-1"></i>
                        密码
                    </label>
                    <div class="relative">
                        <input 
                            type="password" 
                            id="password"
                            class="input-field w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-primary-400 focus:ring-4 focus:ring-primary-50 outline-none transition-all text-gray-700 placeholder-gray-400 pr-12"
                            placeholder="请输入密码"
                            required
                        >
                        <button 
                            type="button"
                            onclick="togglePassword()"
                            class="absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors p-1"
                        >
                            <i id="passwordIcon" data-lucide="eye-off" class="w-5 h-5"></i>
                        </button>
                    </div>
                    <p id="passwordError" class="text-red-500 text-xs mt-1 invisible">密码长度至少6位</p>
                </div>

                <!-- 隐私协议 -->
                <div class="mb-6">
                    <label class="flex items-start cursor-pointer group">
                        <input type="checkbox" id="agreeTerms" class="w-4 h-4 mt-0.5 text-primary-600 border-gray-300 rounded focus:ring-primary-500 cursor-pointer">
                        <span class="ml-2 text-xs text-gray-600 group-hover:text-gray-800 transition-colors">
                            已阅读并同意 
                            <a href="#" class="text-primary-600 hover:underline">《用户服务协议》</a>
                            与
                            <a href="#" class="text-primary-600 hover:underline">《隐私政策》</a>
                        </span>
                    </label>
                    <p id="termsError" class="text-red-500 text-xs mt-1 invisible">请先同意服务协议和隐私政策</p>
                </div>

                <!-- 登录按钮 -->
                <button 
                    type="submit"
                    class="btn-primary w-full py-3.5 bg-gradient-to-r from-primary-500 to-purple-600 hover:from-primary-600 hover:to-purple-700 text-white rounded-xl font-medium shadow-lg hover:shadow-xl transition-all inline-flex items-center justify-center gap-2 group"
                >
                    <span>登录</span>
                    <i data-lucide="arrow-right" class="w-5 h-5 group-hover:translate-x-1 transition-transform"></i>
                </button>

            </form>
        </div>

        <!-- 返回首页 -->
        <div class="text-center mt-6">
            <a href="home.html" class="inline-flex items-center gap-2 text-white/90 hover:text-white transition-colors group">
                <i data-lucide="arrow-left" class="w-4 h-4 group-hover:-translate-x-1 transition-transform"></i>
                <span class="text-sm">返回首页</span>
            </a>
        </div>
    </div>

    <!-- Toast 提示 -->
    <div id="toast" class="fixed top-8 left-1/2 -translate-x-1/2 bg-gray-900 text-white px-6 py-3 rounded-xl shadow-2xl z-[100] opacity-0 transition-all duration-300 pointer-events-none flex items-center gap-3">
        <i id="toastIcon" data-lucide="check-circle" class="w-5 h-5"></i>
        <span id="toastMessage">操作成功</span>
    </div>

    <script>
        // 初始化 Lucide 图标
        lucide.createIcons();

        // 密码显示/隐藏切换
        function togglePassword() {
            const passwordInput = document.getElementById('password');
            const passwordIcon = document.getElementById('passwordIcon');
            
            if (passwordInput.type === 'password') {
                passwordInput.type = 'text';
                passwordIcon.setAttribute('data-lucide', 'eye');
            } else {
                passwordInput.type = 'password';
                passwordIcon.setAttribute('data-lucide', 'eye-off');
            }
            
            lucide.createIcons();
        }

        // 表单验证
        function validateForm() {
            let isValid = true;
            
            // 验证账号
            const username = document.getElementById('username').value.trim();
            const usernameError = document.getElementById('usernameError');
            if (!username || username.length < 3) {
                usernameError.classList.remove('invisible');
                document.getElementById('username').classList.add('shake-animation', 'border-red-400');
                setTimeout(() => document.getElementById('username').classList.remove('shake-animation'), 300);
                isValid = false;
            } else {
                usernameError.classList.add('invisible');
                document.getElementById('username').classList.remove('border-red-400');
            }
            
            // 验证密码
            const password = document.getElementById('password').value;
            const passwordError = document.getElementById('passwordError');
            if (!password || password.length < 6) {
                passwordError.classList.remove('invisible');
                document.getElementById('password').classList.add('shake-animation', 'border-red-400');
                setTimeout(() => document.getElementById('password').classList.remove('shake-animation'), 300);
                isValid = false;
            } else {
                passwordError.classList.add('invisible');
                document.getElementById('password').classList.remove('border-red-400');
            }
            
            // 验证协议勾选
            const agreeTerms = document.getElementById('agreeTerms').checked;
            const termsError = document.getElementById('termsError');
            if (!agreeTerms) {
                termsError.classList.remove('invisible');
                isValid = false;
            } else {
                termsError.classList.add('invisible');
            }
            
            return isValid;
        }

        // 处理登录
        function handleLogin(event) {
            event.preventDefault();
            
            // 表单验证
            if (!validateForm()) {
                return;
            }
            
            const username = document.getElementById('username').value.trim();
            const password = document.getElementById('password').value;
            const agreeTerms = document.getElementById('agreeTerms').checked;
            
            // 模拟登录请求
            console.log('登录信息：', { username, password, agreeTerms });
            
            // 显示登录中提示
            showToast('登录中...', 'info');
            
            // 模拟登录延迟
            setTimeout(() => {
                // 保存登录状态
                const userData = {
                    username: username,
                    nickname: username.includes('@') ? username.split('@')[0] : username,
                    avatar: '',
                    loginTime: new Date().toISOString()
                };
                
                localStorage.setItem('isLoggedIn', 'true');
                localStorage.setItem('userData', JSON.stringify(userData));
                
                // 显示成功提示
                showToast('登录成功！即将跳转...', 'success');
                
                // 跳转回首页或来源页
                setTimeout(() => {
                    const returnUrl = new URLSearchParams(window.location.search).get('return') || 'home.html';
                    window.location.href = returnUrl;
                }, 1000);
            }, 1000);
        }

        // Toast 提示
        function showToast(message, type = 'success') {
            const toast = document.getElementById('toast');
            const toastIcon = document.getElementById('toastIcon');
            const toastMessage = document.getElementById('toastMessage');

            toastMessage.textContent = message;

            let bgColor = 'bg-green-500';
            let iconName = 'check-circle';
            
            if (type === 'error') {
                bgColor = 'bg-red-500';
                iconName = 'alert-circle';
            } else if (type === 'info') {
                bgColor = 'bg-blue-500';
                iconName = 'loader-2';
            } else if (type === 'warning') {
                bgColor = 'bg-amber-500';
                iconName = 'alert-triangle';
            }

            toast.className = `fixed top-8 left-1/2 -translate-x-1/2 px-6 py-3 rounded-xl shadow-2xl z-[100] transition-all duration-300 ${bgColor} text-white opacity-100 transform translate-y-0 flex items-center gap-3`;
            
            toastIcon.setAttribute('data-lucide', iconName);
            lucide.createIcons();
            
            toast.classList.remove('pointer-events-none');

            setTimeout(() => {
                toast.classList.remove('opacity-100', 'translate-y-0');
                toast.classList.add('opacity-0', '-translate-y-2');
                
                setTimeout(() => {
                    toast.classList.add('pointer-events-none');
                }, 300);
            }, 3000);
        }

        // 输入框聚焦时清除错误
        document.getElementById('username').addEventListener('focus', function() {
            document.getElementById('usernameError').classList.add('invisible');
            this.classList.remove('border-red-400');
        });

        document.getElementById('password').addEventListener('focus', function() {
            document.getElementById('passwordError').classList.add('invisible');
            this.classList.remove('border-red-400');
        });

        document.getElementById('agreeTerms').addEventListener('change', function() {
            if (this.checked) {
                document.getElementById('termsError').classList.add('invisible');
            }
        });

        // 回车键登录
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Enter' && !e.shiftKey && !e.ctrlKey) {
                e.preventDefault();
                handleLogin(e);
            }
        });
    </script>

</body>
</html>

